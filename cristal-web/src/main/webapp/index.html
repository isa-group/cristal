<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link href="css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>		

</head>
<body>
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<a class="btn btn-navbar" data-toggle="collapse"
					data-target=".nav-collapse"> 
					<span class="icon-bar"></span> 
					<span class="icon-bar"></span> 
					<span class="icon-bar"></span>
				</a> 
				<a class="brand" href="#">CRISTAL</a>
				<div class="nav-collapse pull-right">
					<ul class="nav">
						<li><a href="http://www.isa.us.es/cristal">More
								information at the CRISTAL web site</a></li>
					</ul>
				</div>
				<!--/.nav-collapse -->
			</div>
		</div>
	</div>

	<div class="container">


		<h1>RACI2BPMN Conversor</h1>

		<h2>RACI Models</h2>
		<textarea class="input-xxlarge" id="racimodel" rows="15" wrap="soft"></textarea>
		
		<h2>BPMN Model (without resources)</h2>
		<textarea class="input-xxlarge" id="bpmnmodel" rows="15" wrap="soft"></textarea>
		
		<div class="well" style="text-align: right;">
			<button class="btn btn-info" onclick="loadExampleData();">Load example (Discards existing model!)</button>
			<a class="btn btn-primary" onclick="generateModel();">Generate BPMN Model with resources</a>
		</div>

		<div class="modal hide" id="modelModal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">×</button>
				<h3>BPMN Model with resources</h3>
			</div>
			<div class="modal-body">
				<textarea class="input-xxlarge" id="bpmnralmodel" rows="15" wrap="soft"></textarea>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal">Close</a>
			</div>
		</div>


	</div>
	<!-- /container -->

	<!-- Le javascript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script src="js/bootstrap.js"></script>
	<script type="text/javascript" charset="utf-8">
		//          

		function loadExampleData() {
			$.ajax({
				type: "GET",
				url: "example/initialBP.bpmn",
				dataType: "text",
				success: function(data) {
					$("#bpmnmodel").val(data);
				}
			});
			
			$.ajax({
				type: "GET",
				url: "example/completeRaciMatrix.json",
				dataType: "text",
				success: function(data) {
					$("#racimodel").val(data);
				}
			});
		}

		function generateModel() {
			var raciModel = $("#racimodel").val();
			var bpmnModel = $("#bpmnmodel").val();
			//var dataString = "raci="+raciModel+"&bpmn="+bpmnModel;
			var dataString = { raci: raciModel, bpmn: bpmnModel };
			
			$.ajax({  
				  type: "POST",  
				  url: "api/raci2bpmn",  
				  data: dataString,  
				  success: function(data) {  
						$("#bpmnralmodel").val(data);
						$("#modelModal").modal();
				  }  
			});  
		}

		//
	</script>
</body>
</html>